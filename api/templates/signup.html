<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Fast food fast - Sign Up</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="{{ url_for('static', filename='css/style.css') }}" />
</head>

<body>
    <!-- nav bar -->
    <header class="site-header mb-4">
        <nav class="navigation">
            <div class="center">
                <a class="in-navigation no-td" href="/">Fast food fast</a>
                <div style=" align-items:center; display: inline-block">
                    <div class="navbar-nav fl-pr">
                        <a class="nav-item nav-link no-td padding-2" href=home.html>Home</a>
                        <a class="nav-item nav-link no-td" href="about.html">About</a>
                    </div>
                    <!-- Navbar Right Side -->
                    <div class="navbar-nav fr">
                        <a class="nav-item nav-link no-td padding-2" href="signin.html">Login</a>
                        <a class="nav-item nav-link no-td" href="signup.html">Register</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- sign up form -->
    <div>
        <div class="content-section ml-10 mr-5">
            <form id="formElement" methdod="POST" action="#">
                <fieldset style="border:0">
                    <legend>
                        <h3>Join Today</h3>
                    </legend>
                    <p class="padding-2"><label>Username</label><br> <input class="form-control" type="text" name="username" /></p>
                    <p class="padding-2"><label>Email</label><br> <input class="form-control" type="email" name="email" /></p>
                    <p class="padding-2"><label>Phone Number</label><br> <input class="form-control" type="number" name="phoneNumber" /></p>
                    <p class="padding-2"><label>Password</label> <br> <input class="form-control" type="password" name="password" /></p>
                    <p class="padding-2"><label>Confirm Password</label><br> <input class="form-control" type="password"
                            name="confirm_password" /></p>
                    <input class="btn" id="submit" name="submit" type="submit" value="Sign Up">
                </fieldset>
            </form>
            <p class="text-muted">Already Have An Account? <a class="link" href="signin.html">Sign in</a></p>
        </div>
        <div class="content-section  mr-10 fr-w-25">
            <img src="{{ url_for('static', filename='images/home.jpg') }}" alt="picture of food" width="100%" height="480px">
        </div>
    </div>

    <!-- scripts -->
    <script>
        // Listen for clicks in the browser
        document.getElementById('submit').addEventListener('click', addUserAPI);

        function addUserAPI() {
            url = 'http://127.0.0.1:5000/signuphtml2';

            // create a request variable and assign a new XMLHttpRequest object to it.
            var request = new XMLHttpRequest();

            // open a new connection, using the GET request on the  URL endpoint
            request.open('GET', url, true);

            request.onload = function () {
                //begin accessing the JSON data here
                var data = JSON.parse(this.response);

                if (request.status >= 200 && request.status < 400) {
                    console.log(data);

                } else {
                    console.log('error');
                }
            }

            request.send();

            // const data = new URLSearchParams(new FormData(formElement));

            // for (const pair of new FormData(formElement))
            // payload = {
            //     username: "emmanuel",
            //     email: "emma@gmail.com",
            //     phone_no: "4324",
            //     password: "emmanuel"
            // }
            // data = {
            //     method: 'GET',
            //     mode: 'no-cors',
            //     // headers: {
            //     //     'Accept': 'application/json',
            //     //     'Content-Type': 'application/json'
            //     // }
            //     // data: payload
            // };

            // resp = fetch(url, data)
            //     .then(function (res) {
            //         console.log(res);
            //         console.log(resp);
            //     })

            // (async () => {
            //     console.log('fetching the url');
            //     resp = fetch(url, data);
            //     console.log('finished');
            // })(
            //     function (res) {
            //         console.log(res);
            //         console.log(12);
            //         console.log(resp);
            //     }
            // )


            // (async () => {
            //     const rawResponse = await fetch(url,
            //         {
            //             method: 'POST',
            //             body: data,
            //             headers: {
            //                 'Accept': 'application/json',
            //                 'Content-Type': 'application/json'
            //             }
            //         })
            //     console.log(rawResponse);
            // })();

        }
    </script>


</body>

</html>